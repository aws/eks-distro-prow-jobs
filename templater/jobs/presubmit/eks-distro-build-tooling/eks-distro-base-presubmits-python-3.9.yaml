jobName: eks-distro-base-tooling-presubmits-python-3.9
runIfChanged: eks-distro-base/.*|scripts/setup_public_ecr_push.sh
imageBuild: true
localRegistry: true
commands:
- export DATE_EPOCH=$(date "+%F-%s")
- if [ -f eks-distro-base/Dockerfile.minimal-base-compiler-base ]; then make python-3.9-compiler-images -C eks-distro-base IMAGE_TAG=${DATE_EPOCH}.${AL_TAG}; fi
- if [ ! -f eks-distro-base/Dockerfile.minimal-base-compiler-base ]; then make minimal-images-base-python3.9 -C eks-distro-base IMAGE_TAG=${DATE_EPOCH}.${AL_TAG}; fi
- make create-pr -C eks-distro-base IMAGE_TAG=${DATE_EPOCH}.${AL_TAG}
envVars:
- name: AL_TAG
  value: 2
- name: IMAGE_REPO
  value: localhost:5000
- name: BUILD_DEPS
  value: true
- name: PLATFORMS
  value: linux/amd64
- name: PRUNE_BUILDCTL
  value: "true"
extraRefs:
- baseRef: main
  org: eks-distro-pr-bot
  repo: eks-distro-build-tooling
- baseRef: main
  org: eks-distro-pr-bot
  repo: eks-distro
- baseRef: main
  org: eks-distro-pr-bot
  repo: eks-anywhere-build-tooling
- baseRef: main
  org: eks-distro-pr-bot
  repo: eks-anywhere
resources:
  requests:
    cpu: 1024m
    memory: 4Gi
